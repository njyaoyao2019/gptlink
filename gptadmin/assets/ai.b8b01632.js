var e=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,t=(a,o,n)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[o]=n,l=(e,l)=>{for(var p in l||(l={}))o.call(l,p)&&t(e,p,l[p]);if(a)for(var p of a(l))n.call(l,p)&&t(e,p,l[p]);return e};import{c as p,f as s}from"./index.a35ddce3.js";import{u as r}from"./useBasicForm.a463284a.js";import{_ as i,a as c}from"./index.a7987ea2.js";import{d,r as u,o as m,h as f,i as b,c as h,f as g,w as v,b as y,u as _,g as k,E as w,v as P,x as I}from"./vendor.1bc4be78.js";const q=[{field:"channel",component:"RadioGroup",label:"使用渠道",required:!0,defaultValue:"gptlink",componentProps:{options:[{label:"GPTLink",value:"gptlink"},{label:"OpenAI",value:"openai"}]}},{field:"default_system_prompt",component:"Input",label:"默认提示词",required:!1,componentProps:{placeholder:"用户不使用模型/角色时，默认的 system prompt"}},{field:"gptlink_key",component:"Input",label:"密钥",required:!0,componentProps:{placeholder:"请输入密钥"},ifShow:({values:e})=>"gptlink"===e.channel},{field:"openai_key",component:"Input",label:"密钥",required:!0,componentProps:{placeholder:"请输入密钥，如有多个密钥每行填写一个，仅用于重试3次请求，无效的key不会主动剔除",type:"textarea",rows:5},ifShow:({values:e})=>"openai"===e.channel},{field:"openai_model",component:"Input",label:"使用模型",required:!0,componentProps:{placeholder:"示例：gpt-3.5-turbo，gpt-3.5-turbo-16k，gpt-4"},ifShow:({values:e})=>"openai"===e.channel},{field:"openai_tokens",component:"Input",label:"合计最大tokens",required:!0,componentProps:{placeholder:"上下文对话合计返回的最大tokens，示例值：4000",type:"number"},ifShow:({values:e})=>"openai"===e.channel},{field:"openai_response_tokens",component:"Input",label:"返回最大Tokens",required:!0,componentProps:{placeholder:"每次请求返回的最大tokens，示例值：1000",type:"number"},ifShow:({values:e})=>"openai"===e.channel},{field:"openai_host",component:"Input",label:"自定义API域名",required:!1,componentProps:{placeholder:"不填写默认为：https://api.openai.com，需要支持http2协议，格式为：https://10.10.10.18"},ifShow:({values:e})=>"openai"===e.channel},{field:"openai_proxy_host",component:"Input",label:"代理地址",required:!1,componentProps:{placeholder:"代理的地址，需要支持socket5协议，格式为：10.10.10.18:7890"},ifShow:({values:e})=>"openai"===e.channel}],V=[{field:"padding",component:"Input",label:"敬请期待",required:!1,slot:"padding"}];const j={class:"cb-page open"},S=(e=>(P("data-v-6a28b47e"),e=e(),I(),e))((()=>y("div",{style:{"margin-bottom":"10px"}},[k("GPTLink密钥获取："),y("a",{href:"https://gpt-link.com",target:"_blank"},"点此前往")],-1))),x={class:"cb-m-b-40"},C={class:"cb-m-l-60"},O=k("确认");var T=i(d({__name:"ai",setup(e){const a=u("11"),o=u([{value:"11",name:"对话配置"},{value:"12",name:"绘画配置"}]),{register:n,validate:t,setFieldsValue:i,resetFields:d,setProps:k}=r({options:{labelCol:{span:6},wrapperCol:{span:8}},schemas:q});m((()=>{T()}));const P=e=>{d();k({schemas:{11:q,12:V}[e]}),setTimeout((()=>{T()}),50)},I=async()=>{try{const e=await t(),o={type:a.value,config:l({},e)};e.agreement&&(o.config={agreements:l({},e)});const{err_code:n}=await c().open.openConfig(o);n||w.success("保存成功")}catch(e){}},T=async()=>{try{const{data:e}=await c().open.getConfig({type:a.value});i(l({},e.config))}catch(e){}};return(e,t)=>{const l=f("el-card"),r=f("CbTab"),i=f("el-button");return b(),h("div",j,[g(l,null,{default:v((()=>[S])),_:1}),g(l,{class:"open-main"},{default:v((()=>[y("div",x,[g(r,{tabs:o.value,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onChange:P},null,8,["tabs","modelValue"])]),g(_(p),{onRegister:_(n)},{agreement:v((({model:e,field:a})=>[g(_(s),{modelValue:e[a],"onUpdate:modelValue":o=>e[a]=o},null,8,["modelValue","onUpdate:modelValue"])])),padding:v((({model:e,field:a})=>[])),_:1},8,["onRegister"]),y("div",C,[g(i,{type:"primary",onClick:I},{default:v((()=>[O])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-6a28b47e"]]);export{T as default};
